<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1">
<title>Supporting HTTP/3 at the ingress gateway in Istio - Tech notes</title>
<meta name=description content="A few months ago I contributed experimental HTTP/3 support at the Istio ingress gateway (PR). For the HTTPS gateway servers which terminate the TLS at the gateway, it automatically adds a mirror HTTP/3 listener over QUIC provided that there is an open UDP port. If there is an HTTPS server on TCP port 443, then an HTTP/3 server is automatically created on UDP port 443 as illustrated in the diagram below."><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"Tech notes","url":"https:\/\/su225.github.io\/"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Organization","name":"","url":"https:\/\/su225.github.io\/"}</script>
<script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https:\/\/su225.github.io\/","name":"home"}},{"@type":"ListItem","position":3,"item":{"@id":"https:\/\/su225.github.io\/posts\/http3-support-in-istio-gateway\/","name":"Supporting HTTP 3 at the ingress gateway in istio"}}]}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","author":{"name":""},"headline":"Supporting HTTP\/3 at the ingress gateway in Istio","description":"A few months ago I contributed experimental HTTP\/3 support at the Istio ingress gateway (PR). For the HTTPS gateway servers which terminate the TLS at the gateway, it automatically adds a mirror HTTP\/3 listener over QUIC provided that there is an open UDP port. If there is an HTTPS server on TCP port 443, then an HTTP\/3 server is automatically created on UDP port 443 as illustrated in the diagram below.","inLanguage":"en","wordCount":1437,"datePublished":"2021-10-23T20:00:17","dateModified":"2021-10-23T20:00:17","image":"https:\/\/su225.github.io\/","keywords":[""],"mainEntityOfPage":"https:\/\/su225.github.io\/posts\/http3-support-in-istio-gateway\/","publisher":{"@type":"Organization","name":"https:\/\/su225.github.io\/","logo":{"@type":"ImageObject","url":"https:\/\/su225.github.io\/","height":60,"width":60}}}</script>
<meta property="og:title" content="Supporting HTTP/3 at the ingress gateway in Istio">
<meta property="og:description" content="A few months ago I contributed experimental HTTP/3 support at the Istio ingress gateway (PR). For the HTTPS gateway servers which terminate the TLS at the gateway, it automatically adds a mirror HTTP/3 listener over QUIC provided that there is an open UDP port. If there is an HTTPS server on TCP port 443, then an HTTP/3 server is automatically created on UDP port 443 as illustrated in the diagram below.">
<meta property="og:url" content="https://su225.github.io/posts/http3-support-in-istio-gateway/">
<meta property="og:type" content="website">
<meta property="og:site_name" content="Tech notes">
<meta name=twitter:title content="Supporting HTTP/3 at the ingress gateway in Istio">
<meta name=twitter:description content="A few months ago I contributed experimental HTTP/3 support at the Istio ingress gateway (PR). For the HTTPS gateway servers which terminate the TLS at the gateway, it automatically adds a mirror â€¦">
<meta name=twitter:card content="summary">
<meta name=generator content="Hugo 0.91.0">
<link rel=alternate href=https://su225.github.io/index.xml type=application/rss+xml title="Tech notes"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css integrity=sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y crossorigin=anonymous>
<link rel=stylesheet href=https://use.fontawesome.com/releases/v5.5.0/css/all.css integrity=sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU crossorigin=anonymous>
<link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><link rel=stylesheet href=https://su225.github.io/css/main.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic">
<link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"><link rel=stylesheet href=https://su225.github.io/css/syntax.css><link rel=stylesheet href=https://su225.github.io/css/codeblock.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css integrity=sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh crossorigin=anonymous>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css integrity=sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R crossorigin=anonymous>
</head>
<body>
<nav class="navbar navbar-default navbar-fixed-top navbar-custom">
<div class=container-fluid>
<div class=navbar-header>
<button type=button class=navbar-toggle data-toggle=collapse data-target=#main-navbar>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span>
</button>
<a class=navbar-brand href=https://su225.github.io/>Tech notes</a>
</div>
<div class="collapse navbar-collapse" id=main-navbar>
<ul class="nav navbar-nav navbar-right">
</ul>
</div>
</div>
</nav>
<div class=pswp tabindex=-1 role=dialog aria-hidden=true>
<div class=pswp__bg></div>
<div class=pswp__scroll-wrap>
<div class=pswp__container>
<div class=pswp__item></div>
<div class=pswp__item></div>
<div class=pswp__item></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class=pswp__top-bar>
<div class=pswp__counter></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class=pswp__preloader>
<div class=pswp__preloader__icn>
<div class=pswp__preloader__cut>
<div class=pswp__preloader__donut></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class=pswp__share-tooltip></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class=pswp__caption>
<div class=pswp__caption__center></div>
</div>
</div>
</div>
</div>
<header class=header-section>
<div class="intro-header no-img">
<div class=container>
<div class=row>
<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
<div class=posts-heading>
<h1>Supporting HTTP/3 at the ingress gateway in Istio</h1>
<hr class=small>
</div>
</div>
</div>
</div>
</div>
</header>
<div class=container role=main>
<div class=row>
<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
<article role=main class=blog-post>
<p>A few months ago I contributed experimental HTTP/3 support at the Istio ingress gateway
(<a href=https://github.com/istio/istio/pull/33817>PR</a>). For the HTTPS gateway
servers which terminate the TLS at the gateway, it automatically adds a mirror HTTP/3
listener over QUIC provided that there is an open UDP port. If there is an HTTPS server
on TCP port 443, then an HTTP/3 server is automatically created on UDP port 443 as
illustrated in the diagram below. All you need to do is to flip a switch on pilot and
open UDP ports (of course, firewall rules allowing the traffic must also be setup. But
that is not in the scope of this demo).</p>
<p>TODO: Add diagram</p>
<h2 id=prerequistes>Prerequistes</h2>
<p>HTTP/3 over QUIC is so new. QUIC was standardized this May end and HTTP/3 is not yet
standardized (There is an IETF draft <a href=https://datatracker.ietf.org/doc/html/draft-ietf-quic-http-34>here</a>).
So creating custom builds, turning on alpha features are expected. I&rsquo;m running Linux.</p>
<h3 id=kubernetes>Kubernetes</h3>
<p>This feature requires the supporting both TCP and UDP on the same port at the gateway. By
default for Kubernetes services of type <code>LoadBalancer</code> this is not allowed. Since Kubernetes
1.20 there is alpha support. As documented <a href=https://kubernetes.io/docs/concepts/services-networking/service/#load-balancers-with-mixed-protocol-types>here</a>, it can be turned on with <code>MixedProtocolLBSupport</code>
feature gate.</p>
<p>For this demo, I use Kind to provision a cluster with the following config</p>
<pre tabindex=0><code>kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
featureGates:
  MixedProtocolLBService: true # Very important
kubeadmConfigPatches:
- |
  apiVersion: kubeadm.k8s.io/v1beta2
  kind: ClusterConfiguration
  metadata:
    name: config
  apiServer:
    extraArgs:
      &quot;service-account-issuer&quot;: &quot;kubernetes.default.svc&quot;
      &quot;service-account-signing-key-file&quot;: &quot;/etc/kubernetes/pki/sa.key&quot;
containerdConfigPatches:
  - |-
    [plugins.&quot;io.containerd.grpc.v1.cri&quot;.registry.mirrors.&quot;localhost:5000&quot;]
      endpoint = [&quot;http://kind-registry:5000&quot;]
</code></pre><p>For the load balancer support, I&rsquo;m using <a href=https://metallb.universe.tf/>MetalLB</a> with the following configuration.
For setup and usage instructions, please refer to their documentation.</p>
<h3 id=curl>cURL</h3>
<p>Testing the setup requires support for <code>--http3</code> flag. If it is not supported out of the box,
then you have to build it with Cloudflare Quiche support as documented <a href=https://github.com/curl/curl/blob/master/docs/HTTP3.md>here</a>.</p>
<h3 id=istio>Istio</h3>
<p>As of writing this Istio 1.12 is not yet released. So the pilot and proxy images should be
built from the master branch.</p>
<h2 id=setup>Setup</h2>
<p>Demo setup consists of</p>
<ol>
<li>Setting up Istio</li>
<li>Deploying httpbin application</li>
<li>Setting up gateway TLS certificates</li>
<li>Configuring ingress gateway</li>
</ol>
<h3 id=setting-up-istio>Setting up Istio</h3>
<p>There are two important things</p>
<ol>
<li>Set <code>PILOT_ENABLE_QUIC_LISTENERS</code> environment variable to <code>true</code> on <strong>Istiod</strong> to turn on generating HTTP/3 mirror listener on the gateway</li>
<li>Exposing both 443/UDP and 443/TCP - <strong>same port, different transport protocol</strong></li>
</ol>
<p>Here is an example <code>IstioOperator</code> spec.</p>
<pre tabindex=0><code>apiVersion: install.istio.io/v1alpha1
kind: IstioOperator
metadata:
  name: install
spec:
  # Replace HUB and TAG to point to your
  # image repository and the custom image tag
  hub: localhost:5000
  tag: master
  components:
    ingressGateways:
    - name: istio-ingressgateway
      enabled: true
      k8s:
        service:
          ports:
          - name: status-port
            port: 15021
            targetPort: 15021
          # Both HTTPS and HTTP/3 must have
          # the same port number. Here it
          # is 443/TCP and 443/UDP
          - name: https
            port: 443
            targetPort: 8443
          - name: http3
            port: 443
            targetPort: 8443
            protocol: UDP
  values:
    pilot:
      # This is required to create mirror QUIC
      # listeners for TLS-terminated HTTPS listeners
      # on the gateway
      env:
        PILOT_ENABLE_QUIC_LISTENERS: true
</code></pre><p>Then install Istio</p>
<pre tabindex=0><code>$ istioctl install -f istio.yaml -y
</code></pre><h3 id=deploying-httpbin>Deploying httpbin</h3>
<p>I am using the sample httpbin provided in the main Istio repository (<a href=https://raw.githubusercontent.com/istio/istio/master/samples/httpbin/httpbin.yaml>Link</a>). Deploy it with good old <code>kubectl</code>. Make sure that Istio sidecars are injected.
You can turn on istio sidecar injection at the namespace level by labeling it <code>istio-injection=enabled</code>
or if you are using revisions (please use it to make upgrades smoother), then it is <code>istio.io/rev=&lt;revision-name></code>.</p>
<pre tabindex=0><code>$ kubectl create namespace httpbin
$ kubectl label namespace httpbin istio-injection=enabled
$ kubectl -n httpbin apply -f \
  https://raw.githubusercontent.com/istio/istio/master/samples/httpbin/httpbin.yaml
</code></pre><h3 id=setting-up-tls-certificates-for-the-gateway>Setting up TLS certificates for the gateway</h3>
<p>HTTP/3 is over TLS only. In fact, using TLS is baked into QUIC, the underlying transport protocol
as described in <a href=https://datatracker.ietf.org/doc/html/rfc9000>RFC-9000</a> and <a href=https://datatracker.ietf.org/doc/html/rfc9001>RFC-9001</a>.
So we need to generate and install certificates. For the demo, I&rsquo;m using self-signed certificates.</p>
<ol>
<li>Parameters for the certificate (Like SAN). Save it as <code>httpbin.cfg</code></li>
</ol>
<pre tabindex=0><code>[req]
default_bits       = 2048
prompt             = no
distinguished_name = req_distinguished_name
req_extensions     = san_reqext

[ req_distinguished_name ]
countryName         = XX
stateOrProvinceName = YY
organizationName    = QuicCorp

[ san_reqext ]
subjectAltName      = @alt_names

[alt_names]
DNS.0   = httpbin.quic-corp.com
</code></pre><ol start=2>
<li>Generate TLS certificates and keys with the following script. Here, I&rsquo;m using <code>openssl</code>. You can
use other tools like <code>cfssl</code> as well.</li>
</ol>
<pre tabindex=0><code>openssl req -x509 -sha256 -nodes -days 365 -newkey rsa:4096 -subj \
    &quot;/C=XX/ST=YY/O=QuicCorp&quot; -keyout quiccorp-ca.key -out quiccorp-ca.crt

openssl req -out httpbin.csr -newkey rsa:2048 -nodes \
    -keyout httpbin.key -config httpbin.cnf

openssl x509 -req -days 365 -CA quiccorp-ca.crt -CAkey quiccorp-ca.key \
    -set_serial 0 -in httpbin.csr -out httpbin.crt \
    -extfile httpbin.cnf -extensions san_reqext
</code></pre><ol start=3>
<li>Install the certificates</li>
</ol>
<pre tabindex=0><code>$ kubectl -n istio-system create secret tls httpbin-cred \
    --key=httpbin.key --cert=httpbin.crt
</code></pre><h3 id=istio-configuration>Istio configuration</h3>
<p>Remember, HTTP/3 listener is generated <strong>automatically</strong> for TLS-terminated HTTPS listener. Currently,
specifying that a port is HTTP/3-only is not yet supported. This is because HTTP/3 support is not widespread
yet and the most common use case is for the clients like Google Chrome to become aware of HTTP/3 support
with <code>alt-svc</code> HTTP header in the response when they first use HTTP/1.1 or HTTP/2 over TCP.</p>
<p>Configure the gateway. Notice that there is no explicit HTTP/3 related configuration</p>
<pre tabindex=0><code>apiVersion: networking.istio.io/v1beta1
kind: Gateway
metadata:
  name: httpbin-gateway
spec:
  selector:
    app: istio-ingressgateway
    istio: ingressgateway
  servers:
  - port:
      number: 443
      name: https
      protocol: HTTPS
    hosts:
    - httpbin.quic-corp.com
    tls:
      mode: SIMPLE
      credentialName: httpbin-cred
</code></pre><p>Configure the route</p>
<pre tabindex=0><code>apiVersion: networking.istio.io/v1beta1
kind: VirtualService
metadata:
  name: httpbin-route
spec:
  hosts:
  - httpbin.quic-corp.com
  gateways:
  - httpbin-gateway
  http:
  - name: httpbin-default-route
    route:
    - destination:
        host: httpbin.httpbin.svc.cluster.local
        port: 
          number: 8000
</code></pre><p>Once these routes are applied, check if two listeners are created</p>
<pre tabindex=0><code>$ istioctl proxy-config listeners istio-ingressgateway-6fdcddbb8b-9rpkx.istio-system
ADDRESS PORT  MATCH                      DESTINATION
0.0.0.0 8443  SNI: httpbin.quic-corp.com Route: https.443.https.httpbin-gateway.istio-system
0.0.0.0 8443  SNI: httpbin.quic-corp.com Route: https.443.https.httpbin-gateway.istio-system
0.0.0.0 15021 ALL                        Inline Route: /healthz/ready*
0.0.0.0 15090 ALL                        Inline Route: /stats/prometheus*
</code></pre><p>Where did the other inbound listener come from? Let us dive deeper into the config.
Let us start with checking listener names</p>
<pre tabindex=0><code>$ istioctl proxy-config listeners istio-ingressgateway-6fdcddbb8b-9rpkx.istio-system \
    --address 0.0.0.0 --port 8443 -o json | jq -r '.[].name'
0.0.0.0_8443
udp_0.0.0.0_8443
</code></pre><p>UDP?? Remember that QUIC uses UDP. So could this be related to QUIC? Let us dive deeper.
The output is huge. So pipe it to a pager like <code>less</code></p>
<pre tabindex=0><code>[Truncated output]
....
                &quot;transportSocket&quot;: {
                    &quot;name&quot;: &quot;envoy.transport_sockets.quic&quot;,
                    &quot;typedConfig&quot;: {
                        &quot;@type&quot;: &quot;type.googleapis.com/envoy.extensions.transport_sockets.quic.v3.QuicDownstreamTransport&quot;,
                        &quot;downstreamTlsContext&quot;: {
                            &quot;commonTlsContext&quot;: {
                                &quot;tlsCertificateSdsSecretConfigs&quot;: [
                                    {
                                        &quot;name&quot;: &quot;kubernetes://httpbin-cred&quot;,
                                        &quot;sdsConfig&quot;: {
                                            &quot;ads&quot;: {},
                                            &quot;resourceApiVersion&quot;: &quot;V3&quot;
                                        }
                                    }
                                ],
                                &quot;alpnProtocols&quot;: [
                                    &quot;h3&quot;
                                ]
                            },
                            &quot;requireClientCertificate&quot;: false
                        }
                    }
                }

</code></pre><p>Well&mldr;The one with <code>udp</code> prefix is a QUIC listener!</p>
<h2 id=demo-time>Demo time</h2>
<p>First note down the address of the Ingress gateway</p>
<pre tabindex=0><code>$ kubectl -n istio-system get svc
NAME                   TYPE           CLUSTER-IP      EXTERNAL-IP    PORT(S)                                       AGE
istio-ingressgateway   LoadBalancer   10.96.112.53    172.18.200.1   15021:32534/TCP,443:31597/TCP,443:31597/UDP   79m
istiod                 ClusterIP      10.96.255.123   &lt;none&gt;         15010/TCP,15012/TCP,443/TCP,15014/TCP         79m

$ export INGRESS_IP=172.18.200.1
</code></pre><p>I have a custom build of curl called <code>qcurl</code> which supports sending HTTP/3 request with
<code>--http3</code> flag. <code>curl</code> here is the standard curl available in the software repositories.
For demo purposes, I&rsquo;m skipping TLS certificate verification. Don&rsquo;t this if it is not a demo.</p>
<p>Let us first send HTTP/2 request</p>
<pre tabindex=0><code>$ curl -svk --http2 --resolve httpbin.quic-corp.com:443:$INGRESS_IP https://httpbin.quic-corp.com/headers
[ Output truncated ]
...
&gt; GET /headers HTTP/2
&gt; Host: httpbin.quic-corp.com
&gt; user-agent: curl/7.76.1
&gt; accept: */*
...
&lt; HTTP/2 200 
&lt; server: istio-envoy
&lt; date: Wed, 27 Oct 2021 05:05:59 GMT
&lt; content-type: application/json
&lt; content-length: 601
&lt; access-control-allow-origin: *
&lt; access-control-allow-credentials: true
&lt; x-envoy-upstream-service-time: 1
&lt; alt-svc: h3=&quot;:443&quot;; ma=86400
&lt; 
{
  &quot;headers&quot;: {
    &quot;Accept&quot;: &quot;*/*&quot;, 
    &quot;Host&quot;: &quot;httpbin.quic-corp.com&quot;, 
    &quot;User-Agent&quot;: &quot;curl/7.76.1&quot;, 
    &quot;X-B3-Parentspanid&quot;: &quot;819c2b2cab59bbe8&quot;, 
    &quot;X-B3-Sampled&quot;: &quot;0&quot;, 
    &quot;X-B3-Spanid&quot;: &quot;0462ac631afb5f84&quot;, 
    &quot;X-B3-Traceid&quot;: &quot;3fa44e3bbbcd21a3819c2b2cab59bbe8&quot;, 
    &quot;X-Envoy-Attempt-Count&quot;: &quot;1&quot;, 
    &quot;X-Envoy-Internal&quot;: &quot;true&quot;, 
    &quot;X-Forwarded-Client-Cert&quot;: &quot;By=spiffe://cluster.local/ns/httpbin/sa/httpbin;Hash=97bf9c90d4a5b9bb8f5da3e825dfa34f04631400420649394741807a320aa0a1;Subject=\&quot;\&quot;;URI=spiffe://cluster.local/ns/istio-system/sa/istio-ingressgateway-service-account&quot;
  }
}
</code></pre><p>Yayyy! It is working. In particular notice this header</p>
<pre tabindex=0><code>alt-svc: h3=&quot;:443&quot;; ma=86400
</code></pre><p>It indicates that HTTP/3 is supported. <code>h3</code> is the ALPN sent with the TLS handshake.
Clients supporting HTTP/3 can use this information to connect with QUIC for the future
connections. <strong>Now, let us send an HTTP/3 request</strong></p>
<pre tabindex=0><code>$ qcurl -svk --http3 --resolve httpbin.quic-corp.com:443:$INGRESS_IP https://httpbin.quic-corp.com/headers
* Added httpbin.quic-corp.com:443:172.18.200.1 to DNS cache
* Hostname httpbin.quic-corp.com was found in DNS cache
*   Trying 172.18.200.1:443...
* Connect socket 5 over QUIC to 172.18.200.1:443
* Sent QUIC client Initial, ALPN: h3,h3-29,h3-28,h3-27
* Connected to httpbin.quic-corp.com () port 443 (#0)
* h3 [:method: GET]
* h3 [:path: /headers]
* h3 [:scheme: https]
* h3 [:authority: httpbin.quic-corp.com]
* h3 [user-agent: curl/7.78.0-DEV]
* h3 [accept: */*]
* Using HTTP/3 Stream ID: 0 (easy handle 0xa64260)
&gt; GET /headers HTTP/3
&gt; Host: httpbin.quic-corp.com
&gt; user-agent: curl/7.78.0-DEV
&gt; accept: */*
&gt; 
&lt; HTTP/3 200
&lt; server: istio-envoy
&lt; date: Wed, 27 Oct 2021 05:08:46 GMT
&lt; content-type: application/json
&lt; content-length: 642
&lt; access-control-allow-origin: *
&lt; access-control-allow-credentials: true
&lt; x-envoy-upstream-service-time: 2
&lt; alt-svc: h3=&quot;:443&quot;; ma=86400
&lt; 
{
  &quot;headers&quot;: {
    &quot;Accept&quot;: &quot;*/*&quot;, 
    &quot;Host&quot;: &quot;httpbin.quic-corp.com&quot;, 
    &quot;Transfer-Encoding&quot;: &quot;chunked&quot;, 
    &quot;User-Agent&quot;: &quot;curl/7.78.0-DEV&quot;, 
    &quot;X-B3-Parentspanid&quot;: &quot;d9f3d78e3f6ddc5c&quot;, 
    &quot;X-B3-Sampled&quot;: &quot;0&quot;, 
    &quot;X-B3-Spanid&quot;: &quot;3f6c920b02a92b73&quot;, 
    &quot;X-B3-Traceid&quot;: &quot;d5c22cd31ddec119d9f3d78e3f6ddc5c&quot;, 
    &quot;X-Envoy-Attempt-Count&quot;: &quot;1&quot;, 
    &quot;X-Envoy-Internal&quot;: &quot;true&quot;, 
    &quot;X-Forwarded-Client-Cert&quot;: &quot;By=spiffe://cluster.local/ns/httpbin/sa/httpbin;Hash=97bf9c90d4a5b9bb8f5da3e825dfa34f04631400420649394741807a320aa0a1;Subject=\&quot;\&quot;;URI=spiffe://cluster.local/ns/istio-system/sa/istio-ingressgateway-service-account&quot;
  }
}
</code></pre><p>And&mldr;..There it goes! <strong>IT WORKS!</strong></p>
<p>Congratulations if you&rsquo;ve made this far!</p>
</article>
<ul class="pager blog-pager">
</ul>
</div>
</div>
</div>
<footer>
<div class=container>
<div class=row>
<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
<ul class="list-inline text-center footer-links">
</ul>
<p class="credits copyright text-muted">
&nbsp;&bull;&nbsp;&copy;
2021
&nbsp;&bull;&nbsp;
<a href=https://su225.github.io/>Tech notes</a>
</p>
<p class="credits theme-by text-muted">
<a href=https://gohugo.io>Hugo v0.91.0</a> powered &nbsp;&bull;&nbsp; Theme <a href=https://github.com/halogenica/beautifulhugo>Beautiful Hugo</a> adapted from <a href=https://deanattali.com/beautiful-jekyll/>Beautiful Jekyll</a>
</p>
</div>
</div>
</div>
</footer><script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js integrity=sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js integrity=sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe crossorigin=anonymous></script>
<script src=https://code.jquery.com/jquery-1.12.4.min.js integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin=anonymous></script>
<script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script>
<script src=https://su225.github.io/js/main.js></script><script>renderMathInElement(document.body)</script><script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js integrity=sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js integrity=sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q crossorigin=anonymous></script><script src=https://su225.github.io/js/load-photoswipe.js></script>
</body>
</html>